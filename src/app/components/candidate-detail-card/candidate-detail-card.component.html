<div *ngIf="candidate as can; else loading">
    <div class="candidate-info-container">
        <span (click)="addToBasket($event)" class="can-basket">
        <ng-container *ngIf="!isAdded; else remove">Add to</ng-container>
        <ng-template #remove>Remove from</ng-template>
        store <md-icon>library_add</md-icon>
    </span>
        <div class="candidate-blocks">
            <div class="candidate-block img" *ngIf="can.picture; else defaultPic">
                <img class="candidate-photo" [src]="can.picture" (click)="download()">
            </div>
            <ng-template #defaultPic>
                <div class="candidate-block img">
                    <img src="./assets/blank-avatar.png" alt="photo">
                </div>
            </ng-template>
            <div class="candidate-block">
                <div class="candidate-feedback-item candidate-name">
                    <div class="candidate-eng">
                        <ng-container *ngIf="can.firstNameEng; else firstNameEng">{{can.firstNameEng}}</ng-container>
                        <ng-template #firstNameEng>Anonymous</ng-template>
                        <ng-container *ngIf="can.lastNameEng; else lastNameEng">{{can.lastNameEng}}</ng-container>
                        <ng-template #lastNameEng>Anonymous</ng-template>
                    </div>
                    <div class="candidate-rus">
                        <ng-container *ngIf="can.firstNameRus; else firstNameRus">{{can.firstNameRus}}</ng-container>
                        <ng-template #firstNameRus>Anonymous</ng-template>
                        <ng-container *ngIf="can.lastNameRus; else lastNameRus">{{can.lastNameRus}}</ng-container>
                        <ng-template #lastNameRus>Anonymous</ng-template>
                    </div>
                </div>
                <div class="candidate-feedback-item">
                    <i class="small material-icons candidate-location">location_city</i>
                    <ng-container *ngIf="can.city; else city">
                        <span>{{can.city}}</span>
                    </ng-container>
                    <ng-template #city>
                        <span>City</span>
                    </ng-template>
                </div>
                <div class="candidate-feedback-item candidate-phone">
                    <i class="small material-icons candidate-phone">call</i>
                    <ng-container *ngIf="can.contact.phone as phone; else phone">
                        <span>{{phone}}</span>
                    </ng-container>
                    <ng-template #phone>
                        <span>Phone</span>
                    </ng-template>
                </div>
                <div class="candidate-feedback-item candidate-email">
                    <i class="small material-icons candidate-email">email</i>
                    <ng-container *ngIf="can.contact.email as email; else email">
                        <span>{{email}}</span>
                    </ng-container>
                    <ng-template #email>
                        <span>E-mail</span>
                    </ng-template>
                </div>
                <div class="candidate-feedback-item candidate-skype">
                    <i class="feedback-logotypes"></i>
                    <ng-container *ngIf="can.contact.skype as skype; else skype">
                        <span>{{skype}}</span>
                    </ng-container>
                    <ng-template #skype>
                        <span>Skype</span>
                    </ng-template>
                </div>
                <div class="candidate-feedback-item candidate-linkedin">
                    <i class="feedback-logotypes"></i>
                    <ng-container *ngIf="can.contact.linkedIn as link; else link">
                        <span>{{link}}</span>
                    </ng-container>
                    <ng-template #link>
                        <span>LinkedIn</span>
                    </ng-template>
                </div>
                <div *ngIf="can.status" class="candidate-info-item candidate-status">{{can.status}}</div>
            </div>
        </div>
        <div class="candidate-info-item">
            <span class="attribute attribute-skills">Primary skill</span>
            <div class="candidate-skills">
                <div *ngIf="can.candidatePrimarySkill as skill">
                    <img *ngIf="skill.picture; else chip" class="candidate-skill" [src]="skill.picture" />
                    <ng-template #chip>
                        <md-chip-list>
                            <md-chip>
                                <div class="candidate-skill-name">{{skill.name}}</div>
                            </md-chip>
                        </md-chip-list>
                    </ng-template>
                </div>
            </div>
        </div>
        <div class="candidate-info-item" *ngIf="can.candidateSecondarySkills as skills">
            <span class="attribute attribute-skills">Secondary skill(s)</span>
            <div class="candidate-skills">
                <ng-container *ngFor="let item of skills">
                    <img class="candidate-skill" *ngIf="item.picture as pic; else text" [src]="pic">
                    <ng-template #text>
                        <md-chip-list>
                            <md-chip>{{item.name}}</md-chip>
                        </md-chip-list>
                    </ng-template>
                </ng-container>
            </div>
        </div>
        <div class="candidate-info-item candidate-english-level">
            <span class="attribute">English</span>
            <ng-container *ngIf="can.englishLevel as eng; else eng">
                <span>{{eng}}</span>
            </ng-container>
            <ng-template #eng>
                <span>none</span>
            </ng-template>
        </div>
        <div class="candidate-info-item candidate-experience">
            <span class="attribute">Experience</span>
            <ng-container *ngIf="can.psExperience as exp; else exp">
                <span>{{exp | date:"mediumDate"}}</span>
            </ng-container>
            <ng-template #exp>
                <span>none</span>
            </ng-template>
        </div>

        <div class="candidate-info-item candidate-desired-salary">
            <span class="attribute">Desired salary</span>
            <ng-container *ngIf="can.desiredSalary as salary; else salary">
                <span>{{salary}}</span>
            </ng-container>
            <ng-template #salary>
                <span>none</span>
            </ng-template>
        </div>
        <div class="candidate-info-item candidate-hr">
            <span class="attribute">HRM</span>
            <ng-container *ngIf="can.hrm?.name as hrName; else hrName">
                <span>{{hrName}}</span>
            </ng-container>
            <ng-template #hrName>
                <span>none</span>
            </ng-template>
        </div>
        <div class="candidate-info-item candidate-last-contact">
            <span class="attribute">Last contact date</span>
            <ng-container *ngIf="can.lastContactDate as last; else last">
                <span>{{last | date:"mediumDate"}}</span>
            </ng-container>
            <ng-template #last>
                <span>none</span>
            </ng-template>
        </div>
        <button (click)="addInterview()">Assign interview</button>
        <button (click)="goToEditForm()">Edit</button>
        <div *ngFor="let item of candidate.vacancies; let index = index">
            <button (click)="rejectVacancy(item.id, index)"><md-icon>remove</md-icon></button>
            <position-preview-mini [position]="item"></position-preview-mini>
        </div>

        <div>
            Primary skill
            <range-form [(range)]="coefficient" [min]="0" [max]="100"></range-form>
            Secondary skills
        </div>
        <button (click)="autoSearch()">search</button>
        <div *ngFor="let vac of possibleVacancies">
            <button (click)="assignVacancy(vac.id)"><md-icon>add</md-icon></button>
            <position-preview-mini [position]="vac"></position-preview-mini>
        </div>
        <button *ngIf="possibleVacancies.length" [hidden]="hasNoVac" (click)="nextPage()">show more</button>


    </div>
</div>
<ng-template #loading>
    <spinner [loading]="true"></spinner>
</ng-template>
